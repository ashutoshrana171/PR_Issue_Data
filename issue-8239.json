{"source": "https://github.com/QuantConnect/Lean", "title": "Adds Algorithm Exception Handler", "link": "https://github.com/QuantConnect/Lean/issues/8239", "state": "open", "created_by": "AlexCatarino", "created_at": "2024-08-01T15:45:35Z", "updated_at": "2024-08-01T15:45:35Z", "closed_at": null, "body": "#### Expected Behavior\r\nBe able to take action when a runtime exception is raised.\r\n\r\n#### Actual Behavior\r\nIf a runtime error occurs, we cannot take actions such as close positions and open orders.\r\n\r\n#### Potential Solution\r\nAdd IAlgorithm.OnError method.\r\n\r\n#### Reproducing the Problem\r\n```python\r\nfrom AlgorithmImports import *\r\nclass FormalFluorescentYellowPenguin(QCAlgorithm):\r\n    def initialize(self):\r\n        self.set_start_date(2024, 6, 30)\r\n        self.add_crypto(\"BTCUSD\")\r\n    def on_data(self, data):\r\n        x=1/0\r\n    def on_end_of_algorithm(self):\r\n        self.liquidate()\r\n```\r\n\r\nIn this case, on_end_of_algorithm is not called, so we cannot close positions and open orders if we want to.\r\n\r\n#### Checklist\r\n- [x] I have completely filled out this template\r\n- [x] I have confirmed that this issue exists on the current `master` branch\r\n- [x] I have confirmed that this is not a duplicate issue by searching [issues](https://github.com/QuantConnect/Lean/issues)\r\n- [x] I have provided detailed steps to reproduce the issue", "comments": []}