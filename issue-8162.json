{"source": "https://github.com/QuantConnect/Lean", "title": "Tests for indicators with several outputs such as Bollinger Bands only compare results to one column", "link": "https://github.com/QuantConnect/Lean/issues/8162", "state": "closed", "created_by": "femtotrader", "created_at": "2024-07-06T07:37:24Z", "updated_at": "2024-07-06T07:38:43Z", "closed_at": "2024-07-06T07:38:43Z", "body": "<!--- This template provides sections for bugs and features. Please delete any irrelevant sections before submitting -->\r\n\r\n#### Expected Behavior\r\n<!--- Required. Describe the behavior you expect to see for your case. -->\r\n\r\nAn indicator which have several outputs such as Bollinger Bands should have each output be compared with reference data.\r\n\r\n#### Actual Behavior\r\n<!--- Required. Describe the actual behavior for your case. -->\r\n\r\nI noticed looking at `BollingerBandsTests.cs` that only one column is compared between one of indicator output and reference data. \r\nSee https://github.com/QuantConnect/Lean/blob/2941210d20c45636b73d19cbba682345ceb10a23/Tests/Indicators/BollingerBandsTests.cs#L32\r\n\r\n#### Potential Solution\r\n<!--- Optional. Describe any potential solutions and/or thoughts as to what may be causing the difference between expected and actual behavior. -->\r\n\r\nMaybe an array containing differents columns names should be given in order to improve test cases.\r\n\r\n#### Reproducing the Problem\r\n<!--- Required for Bugs. Describe how to reproduce the problem. This can be via a failing unit test or a simplified algorithm that reliably demonstrates this issue.  -->\r\n\r\n`spy_bollinger_bands.txt` have the following columns\r\n\r\n - Date\r\n - Open\r\n - High\r\n - Low\r\n - Close\r\n - Moving Average 20\r\n - Bollinger Bands\u00ae 20 2 Top\r\n - Bollinger Bands\u00ae 20 2 Bottom\r\n - BandWidth\r\n - %B\r\n\r\nbut only \"Bollinger Bands\u00ae 20 2 Bottom\" column is being tested\r\n\r\nFaking other column data and tests won't fail\r\nBreaking other output code and tests won't fail\r\n\r\n#### System Information\r\n<!--- Required for Bugs. Include any system specific information, such as OS. -->\r\n\r\n#### Checklist\r\n<!--- Confirm that you've provided all the required information. -->\r\n<!--- Required fields --->\r\n- [x] I have completely filled out this template\r\n- [x] I have confirmed that this issue exists on the current `master` branch\r\n- [x] I have confirmed that this is not a duplicate issue by searching [issues](https://github.com/QuantConnect/Lean/issues)\r\n<!--- Required for Bugs, feature request can delete the line below. -->\r\n- [x] I have provided detailed steps to reproduce the issue\r\n\r\n<!--- Template inspired by https://github.com/stevemao/github-issue-templates -->", "comments": [{"user": "femtotrader", "is_staff": false, "created_at": "2024-07-06T07:38:43Z", "body": "My mistake. I didn't noticed others tests below"}]}