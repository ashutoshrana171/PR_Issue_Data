{"source": "https://github.com/QuantConnect/Lean", "title": "File-based options universe", "link": "https://github.com/QuantConnect/Lean/pull/8212", "state": "open", "created_by": "jhonabreul", "created_at": "2024-07-18T22:26:15Z", "updated_at": "2024-08-12T17:36:38Z", "closed_at": null, "body": "<!--- Provide a general summary of your changes in the Title above -->\r\n\r\n#### Description\r\n<!--- Describe your changes in detail -->\r\n\r\nRefactor Equity and Index Option universe selection:\r\n- Now file-based: option chains are directly read from files instead of being built from price data file names.\r\n- Option contracts include more data at selection time, which means they can be filtered by their data:\r\n  - Data includes Greeks, Implied Volatility and Open Interest.\r\n  - New filters where added to allow this.\r\n- History requests can now be used to fetch this options data, which would be like getting a full unfiltered option chain with the new additional data.\r\n\r\nNotes about some algorithms with changed stats:\r\n- Index BasicTemplateSPXWeeklyIndexOptionsAlgorithm:\r\n  - Stats change because since options universe data is daily, an additional Sample() calls is made on 2021/1/9 midnight\r\n- IndexOptionScaledStrikeRegressionAlgorithm:\r\n  - Orders and stats change because now selection is immediate, so orders are place for the exact same options but an hour earlier, and price is different at that time.\r\n- BasicTemplateOptionsFrameworkAlgorithm:\r\n  - Same contracts traded, just at different time of day with a different price\r\n\r\n#### Related Issue\r\n<!--- This project only accepts pull requests related to open issues -->\r\n<!--- If suggesting a new feature or change, please discuss it in an issue first -->\r\n<!--- If fixing a bug, there should be an issue describing it with steps to reproduce -->\r\n<!--- Please link to the issue here: -->\r\n\r\nPart of #6861 \r\n\r\n#### Motivation and Context\r\n<!--- Why is this change required? What problem does it solve? -->\r\n\r\n- Performance improvements for options algorithms.\r\n- Greeks and other data at selection time, which allows improved filtering.\r\n\r\n#### Requires Documentation Change\r\n<!--- Please indicate if these changes will require updates to documentation, and if so, specify what changes are required -->\r\n\r\nNew filters should be documented\r\n\r\n#### How Has This Been Tested?\r\n<!--- Please describe in detail how you tested your changes. -->\r\n<!--- Include details of your testing environment, and the tests you ran to -->\r\n<!--- see how your change affects other areas of the code, etc. -->\r\n\r\n- Exisiting regression algorithms and unit tests.\r\n- New regression algorithms and unit tests.\r\n\r\n#### Types of changes\r\n<!--- What types of changes does your code introduce? Put an `x` in all the boxes that apply: -->\r\n- [ ] Bug fix (non-breaking change which fixes an issue)\r\n- [x] Refactor (non-breaking change which improves implementation)\r\n- [x] Performance (non-breaking change which improves performance. Please add associated performance test and results)\r\n- [x] New feature (non-breaking change which adds functionality)\r\n- [ ] Breaking change (fix or feature that would cause existing functionality to change)\r\n- [ ] Non-functional change (xml comments/documentation/etc)\r\n\r\n#### Checklist:\r\n<!--- The following is a checklist of items that MUST be completed before a PR is accepted -->\r\n<!--- If you're unsure about any of these, don't hesitate to ask. We're here to help! -->\r\n- [x] My code follows the code style of this project.\r\n- [x] I have read the **CONTRIBUTING** [document](https://github.com/QuantConnect/Lean/blob/master/CONTRIBUTING.md).\r\n- [x] I have added tests to cover my changes. <!--- If not applicable, please explain why -->\r\n- [x] All new and existing tests passed.\r\n- [x] My branch follows the naming convention `bug-<issue#>-<description>` or `feature-<issue#>-<description>`\r\n\r\n<!--- Template inspired by https://www.talater.com/open-source-templates/#/page/99 -->\r\n", "comments": []}